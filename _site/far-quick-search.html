<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Better quick search in FAR Manager with one line of code | Aleksey Fedotov</title>

		<link href="/css/vendor/bootstrap.min.css" rel="stylesheet">
    	<link href="/css/flat-ui.min.css" rel="stylesheet">
		<link rel="stylesheet" href="/css/style.css"/>
		<link rel="stylesheet" href="/css/syntax.css" media="screen"/>
		<link rel="stylesheet" href="/css/fancybox/jquery.fancybox.css" media="screen"/>
		<link rel="stylesheet" href="/css/fancybox/jquery.fancybox-buttons.css" media="screen" />
		<link rel="stylesheet" href="/css/fancybox/jquery.fancybox-thumbs.css" media="screen" />
		<link rel="shortcut icon" type="image/png" href="/images/gamepad.png">
	</head>
	<body>
		<div class="container page">
			<div class="navbar navbar-default" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<a class="navbar-brand" href="/">
				<img src="/images/gamepad_large.png"/>
			</a>
			<div class="navbar-text">Home page of one programmer</div>
		</div>
		<ul class="nav navbar-nav navbar-right">
			<li><a href="/">Articles</a></li>
			<li><a href="/portfolio/">Portfolio</a></li>
			<li><a href="/about/">About</a></li>
		</ul>
	</div>
</div>


			<div class="content">
				<div class="article">
	<div class="row">
		<div class="col-xs-12">
			<h2>Better quick search in FAR Manager with one line of code</h2>
			
				<span class="small text-muted">29 Mar 2014</span>
			
		</div>
	</div>
	
	<div class="article-content">
		<p><img src="/images/far.png" class="img-thumbnail pull-left margined20" /></p>

<p>A few testimonials first. FAR Manager was the kind of software which I used a lot on a daily basis.
Really, it’s fast, has a rich feature set and looks cool (console-styled interface is quite competitive with those native Windows GUI’s that other managers have).
When it comes to reading large files like logs, FAR manager is beyond comparison.</p>

<p>However, one thing that sucks and always did in FAR is the quick search – the search that is activated when you press <code class="highlighter-rouge">Alt</code> key and start typing.
The concept itself is very useful and allows you to navigate files at the speed of light, but in FAR the whole idea is ruined by the way it’s implemented:
FAR seeks the input string only at the beginning of each file name. Let’s imagine that we have a program that consists of an .exe file and many libraries.
All file names have the same prefix. For example, they follow some awkward notation <code class="highlighter-rouge">&lt;CompanyName&gt;.&lt;ProgramName&gt;.&lt;extension&gt;</code>, which, you know,
is quite a real case in business software. As you might expect, there’s no way to quickly navigate the exe file in this directory – you literally have to print the entire file name to select it,
because most of the files differ only by extension.</p>

<!--break-->

<p>OK, I’m being a little biased here. As I figured out today, you actually can use masks when searching. Considering the case above, we could print <code class="highlighter-rouge">*exe</code> to select the executable file.
But note how many actions you have to perform: press Alt, then Shift, then <code class="highlighter-rouge">6</code> to print the <code class="highlighter-rouge">*</code> sign, and only then the essential string that you wish to find. Personally I think
it’s a serious usability problem, because FAR is used mostly by programmers and geeks who need fast access to their files, and pressing all those keys is a boilerplate.
I also never met anyone who knew that FAR supports wildcards in quick search.</p>

<p>Let’s see how other file manager do the job. I’ve used FreeCommander and TotalCommander – they do it in a most natural way: you print a string,
and they select those files that contain the string in their name (not necessary at the beginning). They also have options to tune the behaviour of this feature,
for example they can activate the search when you just start typing, no need to press any special key like Alt. Options also include filtering the files list to show only files that match your query.</p>

<p>Honestly, I don’t use FAR for my personal needs anymore. But at work I use it sometimes to read logs, so today I’ve hacked the program a bit to make the quick search more usable.
If you have Visual Studio and experience the same problems, go to Google code and download the source code. Navigate to the file <code class="highlighter-rouge">far_unicode/filelist.cpp</code> and add one line:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">FileList</span><span class="o">::</span><span class="n">FindPartName</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">Name</span><span class="p">,</span><span class="kt">int</span> <span class="n">Next</span><span class="p">,</span><span class="kt">int</span> <span class="n">Direct</span><span class="p">,</span><span class="kt">int</span> <span class="n">ExcludeSets</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if !defined(Mantis_698)
</span>	<span class="kt">int</span> <span class="n">DirFind</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">string</span> <span class="n">strMask</span> <span class="o">=</span> <span class="n">Name</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">Name</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">IsSlash</span><span class="p">(</span><span class="n">Name</span><span class="p">.</span><span class="n">back</span><span class="p">()))</span>
	<span class="p">{</span>
		<span class="n">DirFind</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">strMask</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
	<span class="p">}</span>

<span class="o">+</span>	<span class="n">strMask</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">L"*"</span><span class="p">);</span>
	<span class="n">strMask</span> <span class="o">+=</span> <span class="s">L"*"</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ExcludeSets</span><span class="p">)</span>
	<span class="p">{</span></code></pre></figure>

<p>As you can see, FAR already turns your string into a mask by adding ‘<em>’ to the end. We go further and add ‘</em>’ to the beginning so that the input string
is searched somewhere in the middle of a file name. Select the required configuration (debug/release, x86/x64) and build the program. Fortunately you
don’t need to install any additional dependencies to build FAR, everything just works out of the box.</p>

<p>Further improvements may involve disabling the Alt key requirement. Really, why is it there? All FAR use cases I’ve seen so far involve a lot of file
navigation and editing and very few or no typing in the console. If you want to run some tool very often, go start cmd.exe directly from FAR and type
the necessary command there. That will allow you to start the tool fast and from the very same directory each time.</p>

	</div>
</div>

			<div>

			
	<div id="disqus_thread">
	</div>
	<script type="text/javascript">
		var disqus_shortname = 'raycastnet'; // required: replace example with your forum shortname
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


		</div>

		<div class="footer">
	<p class="text-muted">© 2014-2017 Aleksey Fedotov</p>
</div>

<script src="/js/vendor/jquery.min.js"></script>
<script src="/js/vendor/video.js"></script>
<script src="/js/vendor/flat-ui.min.js"></script>
<script src="/js/vendor/fancybox/jquery.fancybox.pack.js"></script>
<script src="/js/vendor/fancybox/jquery.fancybox-buttons.js"></script>
<script src="/js/vendor/fancybox/jquery.fancybox-media.js"></script>
<script src="/js/vendor/fancybox/jquery.fancybox-thumbs.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-50872849-1', 'f5v.me');
  ga('send', 'pageview', {
    "page": "/far-quick-search",
    "title": 'Better quick search in FAR Manager with one line of code'
  });
</script>

<script>
	$(document).ready(function() {
		$(".lightbox").fancybox();
	});
</script>

	</body>
</html>
