<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preload" href="/page-component---src-pages-nsf-devlog-2-js-f5951f8a90a5a652f8e0.js" as="script"/><link rel="preload" href="/path---nsf-devlog-2-586c7e095e534a3909ec.js" as="script"/><link rel="preload" href="/layout-component---index-a2879b35e1f569f89061.js" as="script"/><link rel="preload" href="/app-ea5dbf65ee48b2594b2e.js" as="script"/><link rel="preload" href="/commons-7d7dc5e746ede27497b7.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-ea5dbf65ee48b2594b2e.js","8144742166368117000":"page-component---src-pages-404-js-d1b6fe165865514a0916.js","16228548823048030000":"page-component---src-pages-about-js-5419118fa496c621aa18.js","12200721278437278000":"page-component---src-pages-chaiscript-recipes-js-fa3a085a8ea66d302c98.js","9594620781867358000":"page-component---src-pages-artwork-js-c8e280078fd6c2791950.js","13387013374800785000":"page-component---src-pages-cubicroll-js-22976c655df1d72709b4.js","8405022255812999000":"page-component---src-pages-clion-multiple-binaries-js-80044aed22401d6f23c6.js","14571134556174995000":"page-component---src-pages-freeglut-fixed-window-js-96ff9306aaf5101346a5.js","4016850265702045000":"page-component---src-pages-index-js-44f1592a9debc885353d.js","12830661747251483000":"page-component---src-pages-hwcursor-js-441b1905ed8062eb534d.js","13689988232354690000":"page-component---src-pages-line-bound-js-9f7ca68d2345cc1d6624.js","118364875583439550":"page-component---src-pages-lua-intf-js-07e5d19770deccba29fd.js","17985156244173736000":"page-component---src-pages-nether-devlog-js-4a7d4dfdf0943de86e1d.js","14152405270936720000":"page-component---src-pages-nsf-devlog-2-js-f5951f8a90a5a652f8e0.js","9169554604063220000":"page-component---src-pages-nsf-devlog-js-4de1e5a183cb5922516f.js","1452333863259707600":"page-component---src-pages-nsf-js-b6084f66bc163fadbb4a.js","8002428301075783000":"page-component---src-pages-odd-cpp-js-0363c2151dc78f5033e0.js","8423724801861283000":"page-component---src-pages-portfolio-js-11e962bea5d2f4224912.js","9721245201524513000":"page-component---src-pages-projects-js-f3fbba3e832022518a23.js","12340945852327236000":"page-component---src-pages-sortvis-js-6b1b2f8790cb2126f85c.js","18059632766440628000":"page-component---src-pages-rebus-js-1f48aed18c2a8a760969.js","5866629043876192000":"page-component---src-pages-uncopy-js-9b0854540b537a69413c.js","3059561710810546700":"page-component---src-pages-unity-3-d-array-of-custom-objects-js-20f06d86d36ac00033da.js","7013240841797279000":"page-component---src-pages-unity-3-d-spectator-camera-js-4eb43a66d856daf1319c.js","1570422109460401700":"page-component---src-pages-unity-3-d-pick-and-drag-js-f2761a7eea84bf83e88e.js","16490050847094010000":"page-component---src-pages-unreal-platforms-js-1b5dc70e4e6e2b5ca564.js","882884807161904000":"page-component---src-pages-windows-main-js-52193057b9ac89b0e032.js","6926990323429763000":"page-component---src-pages-wireframe-js-bb7f2de64d78b05285db.js","16647598582412890000":"path---404-586c7e095e534a3909ec.js","17953591736895156000":"path---about-586c7e095e534a3909ec.js","7271501769925354000":"path---chaiscript-recipes-586c7e095e534a3909ec.js","9986001659661870000":"path---artwork-586c7e095e534a3909ec.js","12033017992842664000":"path---cubicroll-586c7e095e534a3909ec.js","12625989487647412000":"path---clion-multiple-binaries-586c7e095e534a3909ec.js","13487468619723299000":"path---freeglut-fixed-window-586c7e095e534a3909ec.js","9347362237655822000":"path---index-586c7e095e534a3909ec.js","1374190494701750000":"path---hwcursor-586c7e095e534a3909ec.js","10057997867254098000":"path---line-bound-586c7e095e534a3909ec.js","566472300682297700":"path---lua-intf-586c7e095e534a3909ec.js","11986119922783824000":"path---nether-devlog-586c7e095e534a3909ec.js","6198458038639085000":"path---nsf-devlog-2-586c7e095e534a3909ec.js","14687764190454106000":"path---nsf-devlog-586c7e095e534a3909ec.js","1816814809712808700":"path---nsf-586c7e095e534a3909ec.js","8736120395001223000":"path---odd-cpp-586c7e095e534a3909ec.js","12589110883905569000":"path---portfolio-586c7e095e534a3909ec.js","6408524664133516000":"path---projects-586c7e095e534a3909ec.js","10770882656350593000":"path---sortvis-586c7e095e534a3909ec.js","4702101129390883000":"path---rebus-586c7e095e534a3909ec.js","9838961998885528000":"path---uncopy-586c7e095e534a3909ec.js","11619470239911205000":"path---unity-3-d-array-of-custom-objects-586c7e095e534a3909ec.js","14812566356430060000":"path---unity-3-d-spectator-camera-586c7e095e534a3909ec.js","15848427140066738000":"path---unity-3-d-pick-and-drag-586c7e095e534a3909ec.js","12210310786293494000":"path---unreal-platforms-586c7e095e534a3909ec.js","6076917203444821000":"path---windows-main-586c7e095e534a3909ec.js","12009341268478530000":"path---wireframe-586c7e095e534a3909ec.js","11711201792954765000":"path---404-html-586c7e095e534a3909ec.js","17241999800008180000":"layout-component---index-a2879b35e1f569f89061.js"}
            //]]>
            </script><style type="text/css" id="server-side-jss">.root-0-7 {
  margin-bottom: 40px;
}
.root-0-7 h1 {
  font-size: 2em;
  line-height: 1.5em;
}
.underline-0-8 {
  width: 100%;
  height: 1px;
  border-bottom: 1px solid #eee;
}
.date-0-9 {
  color: #b1b1b1;
  font-size: 0.9em;
  margin-bottom: 0px;
}
.root-0-12 {
  margin-bottom: 20px;
}
.root-0-4 {
  color: #0090B2;
  text-decoration: none;
}
.root-0-4:visited {
  text-decoration: none;
}
.root-0-4:focus {
  color: #0018BB;
  text-decoration: none;
}
.root-0-4:hover {
  color: #0018BB;
  text-decoration: none;
}
.disguise-0-5 {
  color: #34495e;
}
.disguise-0-5:hover {
  color: #34495e;
}
.disguise-0-5:visited {
  color: #34495e;
}
.disguise-0-5:focus {
  color: #34495e;
}
.root-0-15 {
  margin-bottom: 30px;
}
.root-0-17 {
  margin-top: 50px;
}
.normal-0-13 {
  font-size: 1.5em;
  margin-bottom: 20px;
}
.small-0-14 {
  font-size: 1.1em;
  margin-bottom: 10px;
}
.root-0-16 {
  padding: 2px 6px;
  border-radius: 4px;
  background-color: #f9f2f4;
}
.root-0-10 {
  display: flex;
  margin-top: 40px;
  margin-bottom: 40px;
  justify-content: center;
}
.fullWidth-0-11 {
  width: 100%;
  height: 100%;
}
.root-0-0 {
  width: 900px;
  margin: 0 auto;
  height: 80px;
  display: flex;
  max-width: 900px;
  align-items: center;
  flex-direction: row;
  justify-content: space-between;
}
.brand-0-1 {
  display: flex;
  align-items: center;
}
.brand-0-1 div {
  display: inline-block;
}
.logo-0-2 {
  width: 50px;
  height: 25px;
  margin-right: 20px;
  background-size: cover;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAYAAACqNX6+AAAABHNCSVQICAgIfAhkiAAAAAFzUkdCAK7OHOkAAAAEZ0FNQQAAsY8L/GEFAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABs1JREFUeF7tnGtIFUEUgI+rlZVPtIR8gKVCYj8M9EcG2hNNzIr+iIgoqP0JBe1PEQlWv6KINAp6gYUIovSyksIytHwQFeKLQLEs0+j5o5e27RmPV9c7997du3NNbT843HNmd2fXOXdm55wZr5usAALo7OyER48eQXt7O/T09MDr16/h48eP8OPHDzpjYeDp6QkBAQEQEhICa9euhfj4eNiyZQtERUXRGQZBhzhLY2OjnJSUhA7978XNzU1OTk6Wm5qaqHWcwymHnD9/Xla+KdwHMwVkd3d3uby8nFpLH7occuvWLXnRokXchzDFWvBLe+fOHWo9bWh2SEpKCvempjiWTZs2USs6xqFDhoaGuDcxRb8MDg5Sq9rGrkPa2tq4FZvivDx58oRal49NhzQ3N3MrNMW4PH36lFrZGq5D+vv7uRWZIk4GBgaotdVwA0NlTk2aiSvhND1I9Glh8+bNpJkgPj4+sG3bNli/fj2ViEMJqkmbQtVDrl+/Drt27SLLGBkZGSBJkuVbgDqmUWpqapg9H3j48CEkJiaSNcHOnTvh5s2bZBnnxo0bkJaWRpYCOmQSDw8PNr4ZlaNHj1KN1hw7dox7zVyTV69e0RNbk5CQwL3GGcFAezqWIev06dMwNjZGljFWrFhBmjXBwcGkzV1SU1NhzZo1ZFlTWVlJmnF+//4NZ86cIWvaO6S4uJg044yPj5NmjSinu5L09HTS+ISHh7MhWBSFhYWkkUNwrLTXiP8bv379Is02yuhCmnGwLly6QJhDysrKmGEywaVLl0jj09bWJtQhiPLeZZ/MIY2NjcwwmeDZs2dw7949sqwRNROdzoMHD9in1NXVJdzbC4Hk5GQ4fvw4/Pnzh0oAnj9/zlYK3717RyXiQB/gSqvU1NRERSYzOXToELi7u7PgEJduY2NjYWhoiI6KB30hdXR0kCkOe+voP3/+JO3f4evry4YI/FaifP78GfLy8uioNd++fbP53Li+jkP+ZF0jIyOQm5tLR/WB7ya3DRs2yC0tLVTkmMWLF8OpU6dYvgsfYCbojO3bt0NMTAyVqOnu7ob6+npYunQplahRAiVobW2FixcvUolY0BnoAB6XL1/W1ZgrV66E9+/fk6XmxIkTcODAAbK0sXHjRoDQ0FAWMWoVpRsrfnA9yljNvb9RUZxNd+ATERHBvY4nuF5kj1WrVnGvsyVhYWGy9OHDB0XXDvaQ2WDZsmWkicPDw4Nt27FHQUEBaY6Ji4sjjU9OTg5p2kBfSHr3TSmOJ821uOI+WpyML3BR6K3r+/fvmAEQlwKY63z9+pVt3rPH3bt3SXPMp0+fSOOD70o9oC+k5cuXk6mN2Vq8ctV97A0j6LC6ujqyHLN//37SrBkYGLCkQ7SCvpBwpqCH2cp5acknOQOuP+Tn55M1xYsXL8DPz48sbVy7dg2KiorImgIjfUxA6iUoKAjctm7dKt+/f5+KHIPTVZzS2Zr24ji4Y8cOtu+VB+4BbmhoYIEWD5z24h907tw5KnEN+PyYZg8MDASc9vf19dER/WBduHDl7+/PekV/fz8d0QeuTGLq1zLtEiUVFRU46+Ny8uRJ7jVzUYKDg+UrV67ISu+RHz9+LGdlZXHPEyVKb5OhqqqKe9CIXLhwgZrfmrNnz3KvmWuye/duemI1Sk/ini9CqqurZYlFhyYqMNaqra0lS01kZCQoIwBZYklISAAJs5d6Z1oLnZKSEtL47Nu3jzRxeHl5seVtFoQo3ZMVmkyAvcAeGC9g1C+SPXv2sE/mkNLSUmaYTPDy5UvS+GB2Q/TegCNHjrBP5hDcYTEfdoPMFpjNtoej43oJDQ2F1atXM92SN1FmP6QZx146Bhd85gO2kpAYQx08eJAsMajanmZzDJx3Y5FRsReH4CY63jVzUXAT2+HDh+Xbt2/LlZWVMq4d8c4zIphyn45qKylG0evWrSPLebCH4FZSZLJ6LJtvW0lnA9zToMpqoEOmk5+fr/KgKa4TZfpMrT4F998RcCuo3oUrE33gWjyvjbkOwUzrkiVLyDJxBbinlxfLcKdDmDrAX2IwcQ1v3ryxHVhiD7HF8PCwaswzxbi8ffuWWpcPd8iaDg5f+E7B1TQT58H19dHRUYebRGxHcARW8OXLF8jOzqYSE71kZmayNtS0Y4f1E420t7fLyuzAqhuawpfAwECH+8Bmosshk2DU6ufnx30IU0D29vaWr169Sq2lD6ccMklHR4ecmprKfv2G92D/k+D/Z+7du5ct9xrB4UtdK729vZYfMMN0wODgIAt8cJOyoFv8c3AzA8ZnuDEiLCwMoqOjWRIS/1NXzA+YAfwFlkwjDauhiugAAAAASUVORK5CYII=);
  background-position: 0;
}
.menu-0-3 {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}
.menu-0-3 a {
  margin-right: 20px;
}
.menu-0-3 a:last-child {
  margin-right: 0;
}
.root-0-6 {
  width: 900px;
  margin: 30px auto 0 auto;
  max-width: 900px;
}
.root-0-18 {
  width: 100%;
  bottom: 0;
  height: 100px;
  display: flex;
  position: absolute;
  align-items: center;
}
.content-0-19 {
  width: 900px;
  margin: 0 auto;
  max-width: 900px;
}</style><title data-react-helmet="true">Not So Flat devlog, part 2 | Aleksey Fedotov</title><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-7d7dc5e746ede27497b7.js","/app-ea5dbf65ee48b2594b2e.js","/layout-component---index-a2879b35e1f569f89061.js","/path---nsf-devlog-2-586c7e095e534a3909ec.js","/page-component---src-pages-nsf-devlog-2-js-f5951f8a90a5a652f8e0.js"
])
  </script><link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAATlJREFUWIXtlb9KA0EQhz8l4isIgSAH2ttY2UXEJ/ARRC20ibUg6U1ULOx8gVhG8AkUrEQ9BB9AUpuYU6PF7sKoO+T2jJBiP1g45rc3v5nbPweRSCQypiRAE0iBLvBZcGTAI3AMzOc137EvFjXVxhuwm8d8VIYDJV7TzBOl82VgJdC8BUwD2x4tQ1mOhpLMEVLAvn1nSdGPfAU8jKCANnBpuzwHnjEb+ezH1019BbyICXXfBMuaYn5n9QngScTnbPxQxPouWUkkls9FKAMLwBQwI+KrmKO8KGIDX4J7fnf1LvSQPXBlDU8U/dYlnRQG7dy9DqcFXAOnin7hC84CPb5X+gFUCT+GHWAPuPFoXaCiVb4ZaFRkrGvmji3g9R+Me8DGMHNHgrmYUv72X+hj7pcDzBJHIpHI+PEFo5MROikkzA0AAAAASUVORK5CYII="/><style id="gatsby-inlined-css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#000;background:#f8f8ff}.hljs-comment,.hljs-quote{color:#408080;font-style:italic}.hljs-keyword,.hljs-literal,.hljs-selector-tag,.hljs-subst{color:#954121}.hljs-number{color:#40a070}.hljs-doctag,.hljs-string{color:#219161}.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-type{color:#19469d}.hljs-params{color:#00f}.hljs-title{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-template-variable,.hljs-variable{color:teal}.hljs-link,.hljs-regexp{color:#b68}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@font-face{font-family:OpenSans;src:url(/static/OpenSans-Regular-webfont.83efe336.eot);src:url(/static/OpenSans-Regular-webfont.83efe336.eot?#iefix) format("embedded-opentype"),url(/static/OpenSans-Regular-webfont.55b8ce1f.woff) format("woff"),url(/static/OpenSans-Regular-webfont.3cbf4d3e.ttf) format("truetype"),url(/static/OpenSans-Regular-webfont.2d13ddbb.svg#open_sansregular) format("svg");font-weight:400;font-style:normal}body,html{margin:0;padding:0;font-family:OpenSans,sans-serif;font-size:18px;line-height:31px;color:#34495e}html{position:relative;min-height:100%}body{margin-bottom:150px}h1,h2,h3,h4{margin-top:0;margin-bottom:0}iframe{border:none}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="133686280"><div class="root-0-0" data-reactid="2"><a class="root-0-4 disguise-0-5" href="/" target="" data-reactid="3"><div class="brand-0-1" data-reactid="4"><div class="logo-0-2" data-reactid="5"></div><div data-reactid="6">// Home page of one programmer</div></div></a><div class="menu-0-3" data-reactid="7"><a class="root-0-4 " href="/" target="" data-reactid="8"><strong data-reactid="9">Articles</strong></a><a class="root-0-4 " href="/projects" target="" data-reactid="10"><strong data-reactid="11">Projects</strong></a><a class="root-0-4 " href="/about" target="" data-reactid="12"><strong data-reactid="13">About</strong></a></div></div><div class="root-0-6" data-reactid="14"><div data-reactid="15"><div class="root-0-7" data-reactid="16"><h1 data-reactid="17">Not So Flat devlog, part 2</h1><div class="underline-0-8" data-reactid="18"></div><span class="date-0-9" data-reactid="19">04 May 2015</span><!-- react-empty: 20 --></div><div class="root-0-10" data-reactid="21"><img src="data:image/png;base64,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" class="" data-reactid="22"/></div><div class="root-0-12" data-reactid="23"><a class="root-0-4 " href="/nsf-devlog" target="" data-reactid="24">Part 1</a></div><div class="root-0-12" data-reactid="25"><!-- react-text: 26 -->So, this finally happened! Not So Flat has been released and is <!-- /react-text --><a class="root-0-4 " href="http://0xc0dec.itch.io/notsoflat" target="" data-reactid="27">available for free on itch.io</a><!-- react-text: 28 -->.<!-- /react-text --></div><div class="root-0-12" data-reactid="29">The only game before Not So Flat that also had a devlog was ultimately abandonded and never made it to the release. I was afraid Not So Flat would suffer the same fate, but things turned out (almost) very well.</div><div class="root-0-12" data-reactid="30">This second part of the devlog is aimed at explaining the character movement implementation. This includes two major topics: the actual movement (running and jumping) and the calculation of the space available for movement.</div><h2 class="normal-0-13" data-reactid="31">Distances calculation</h2><div class="root-0-12" data-reactid="32">Each frame, in order to calculate and apply a movement vector (position delta), I need to know how much room for the movement there is. To get this information, several rays are cast in all four directions from the character. For example, to calculate distance to the nearest obstacle below the character I cast three rays: one from the center of the bottom edge of the character, and two from the lower left and right corners. Having three distances calculated, the final distance in this case would be the minimum of the three. Three rays represent the character geometric dimensions and allow it, for example, to stand on a platform by touching it with a small area of the bottom edge:</div><div class="root-0-10" data-reactid="33"><img src="/static/screenshot1.488446d9.png" class="" data-reactid="34"/></div><div class="root-0-12" data-reactid="35">The three-ray approach, however, has its flaws. For example, if I made a platform that has a width of, say, 1/4 of the character width, the character would fall through it once the platform is placed right between the casted rays. For this reason, there are no platforms in the game that are narrower than the half of the character width.</div><div class="root-0-12" data-reactid="36">Distance calculation is also required for determining whether or not the character should be wrapped around the corner. For example, a ray that is cast from the middle of the left character edge in the right direction can be used to calculate the distance between the character center and the nearest wall on the right. If the resulting distance is less than the character half-width then the character mesh gets adapted to fit into the corner. This whole procedure is quite complex and has many nuances, so I won’t go into further details here. An in-depth description probably deserves a separate blog post. Just to give you an idea of how many rays are involved:</div><div class="root-0-10" data-reactid="37"><img src="/static/screenshot2.c0464c40.png" class="" data-reactid="38"/></div><h2 class="normal-0-13" data-reactid="39">Running and jumping</h2><div class="root-0-12" data-reactid="40"><!-- react-text: 41 -->When I was approaching the character movement implementation I knew beforehand that I want the jumps to have two main features:<!-- /react-text --><ul data-reactid="42"><li data-reactid="43">a bit of control in the air</li><li data-reactid="44">variable height</li></ul></div><div class="root-0-12" data-reactid="45">There was no special reason for this, the game wasn’t built around these particular features. That was just my personal preference - I feel it very satisfying to have the ability to change movement direction while in the air.</div><div class="root-0-12" data-reactid="46">The process can be split into two parts. The first part is responsible for the horizontal component of the movement. It is the easiest of the two and is implemented as follows:</div><div class="root-0-15" data-reactid="47"><pre data-reactid="48"><code class="csharp" data-reactid="49">private const float groundAcceleration = 10f;
private const float airAccelerationX = 5f;
private const float maxSpeedX = 4;
// ...

var accelerationX = groundAcceleration;
if (ContinueJumping())
    accelerationX = airAccelerationX;
if (MoveLeft ^ MoveRight)
    targetSpeedX = MoveRight ? maxSpeedX : MoveLeft ? -maxSpeedX : 0;
else
    targetSpeedX = 0;
speedX = Mathf.Lerp(speedX, targetSpeedX, Time.deltaTime * accelerationX);
dx = Time.deltaTime * speedX;</code></pre></div><div class="root-0-12" data-reactid="50"><!-- react-text: 51 -->First we define the current horizontal acceleration (<!-- /react-text --><code class="root-0-16" data-reactid="52">accelerationX</code><!-- react-text: 53 -->). If the character is in the air (i.e. is jumping, so that the ContinueJumping() function returns <!-- /react-text --><code class="root-0-16" data-reactid="54">true</code><!-- react-text: 55 -->), the acceleration gets a smaller value, which is exactly what “a bit of control in the air” stands for. The constants are adjustable, so I can make the character be super-controllable in the air as well as make it not controllable at all.<!-- /react-text --></div><div class="root-0-12" data-reactid="56"><!-- react-text: 57 -->After we’re done with the acceleration, we calculate the new horizontal speed<!-- /react-text --><code class="root-0-16" data-reactid="58">targetSpeedX</code><!-- react-text: 59 --> that the character tries to reach. Since the acceleration is finite, the character doesn’t reach this speed at once - thus the name.<!-- /react-text --><code class="root-0-16" data-reactid="60">MoveLeft</code><!-- react-text: 61 --> and <!-- /react-text --><code class="root-0-16" data-reactid="62">MoveRight</code><!-- react-text: 63 --> flags indicate the directions in which the player wants to move the character (simply speaking, they indicate whether or not the left and right cursor keys are being pressed). The <!-- /react-text --><code class="root-0-16" data-reactid="64">targetSpeedX</code><!-- react-text: 65 --> can only have three values: 0, <!-- /react-text --><code class="root-0-16" data-reactid="66">-maxSpeedX</code><!-- react-text: 67 --> and <!-- /react-text --><code class="root-0-16" data-reactid="68">maxSpeedX</code><!-- react-text: 69 -->, which means that the character is either moving left, right, or is stopping horizontal movement at all.<!-- /react-text --></div><div class="root-0-12" data-reactid="70"><!-- react-text: 71 -->The final step of the process is the calculation of the actual speed <!-- /react-text --><code class="root-0-16" data-reactid="72">speedX</code><!-- react-text: 73 -->. The is done fairly simple, by calling the Lerp function, which already performs all range checks and won’t allow the speed value to go beyond the range <!-- /react-text --><code class="root-0-16" data-reactid="74">[-maxSpeedX, 0]</code><!-- react-text: 75 --> or <!-- /react-text --><code class="root-0-16" data-reactid="76">[0, maxSpeedX]</code><!-- react-text: 77 -->. Having the final speed value, we calculate the horizontal position delta <!-- /react-text --><code class="root-0-16" data-reactid="78">dx</code><!-- react-text: 79 -->.<!-- /react-text --></div><div class="root-0-12" data-reactid="80">The vertical component of the movement is a little bit trickier. The main difficulty comes from our wish to allow jumping by a variable height: the character jumps higher as the player presses the button longer. Let’s look at the code:</div><div class="root-0-15" data-reactid="81"><pre data-reactid="82"><code class="csharp" data-reactid="83">private const float maxDownSpeed = 12;
private const float jumpExtraGravityTime = 0.5f;
private const float jumpAccelerationDuration = 0.2f;
private float jumpTime = jumpExtraGravityTime;

// ...

private void StartJumping()
{
    if (!grounded &amp;&amp; !jumping)
        canJump = false;
    if (!Jump &amp;&amp; grounded)
        canJump = true;
    if (Jump &amp;&amp; !jumping &amp;&amp; canJump)
    {
        canJump = false;
        jumping = true;
        jumpAccelerationDone = false;
        grounded = false;
        jumpTime = 0;
        speedY = maxUpSpeed;
        // ...
    }
}

// ...

private bool ContinueJumping()
{
    if (jumping)
    {
        jumpTime += Time.deltaTime;
        if (!Jump || jumpTime &gt;= jumpAccelerationDuration)
            jumpAccelerationDone = true;
    }
    return jumping;
}

// ...


if (ContinueJumping())
// ...

if (jumpAccelerationDone)
{
    var acceleration = gravityAcceleration;
    if (!Jump)
        acceleration *= 2 - Mathf.Min(1, jumpTime / jumpExtraGravityTime);
    speedY = Mathf.Max(speedY - Time.deltaTime * acceleration, -maxDownSpeed);
}
dy = Time.deltaTime * speedY;</code></pre></div><div class="root-0-12" data-reactid="84"><!-- react-text: 85 -->The idea here is as follows. When the jump starts, we instantly set the character vertical speed to a certain maximum (as many other games do). We also keep track of how long the jump lasts (<!-- /react-text --><code class="root-0-16" data-reactid="86">jumpTime</code><!-- react-text: 87 -->). The first jump phase is a special acceleration phase, which lasts for <!-- /react-text --><code class="root-0-16" data-reactid="88">jumpAccelerationDuration</code><!-- react-text: 89 -->. During this phase we don’t apply gravity, so the character keeps moving up with a constant maximum speed. This phase ends when either of the two events occur: 1) the <!-- /react-text --><code class="root-0-16" data-reactid="90">jumpTime</code><!-- react-text: 91 --> exceeds the <!-- /react-text --><code class="root-0-16" data-reactid="92">jumpAccelerationDuration</code><!-- react-text: 93 --> 2) the player stops pressing the jump button.<!-- /react-text --></div><div class="root-0-12" data-reactid="94">Once the acceleration phase ends, we start applying the gravity. The trick here is that the gravity value depends on the duration of the acceleration phase. If the player has been pressing the jump button for a very short amount of time, the gravity will be stronger than it would be for a longer jump. This tuning is done in the line</div><div class="root-0-15" data-reactid="95"><pre data-reactid="96"><code class="csharp" data-reactid="97">acceleration *= 2 - Mathf.Min(1, jumpTime / jumpExtraGravityTime);</code></pre></div><div class="root-0-12" data-reactid="98">I found that variable gravity, while being not realistic in theory, produces more enjoyable results in practice. As always in gamedev, I had to playtest a lot to figure out the implementation that works best for me.</div><div class="root-0-12" data-reactid="99">Once the two components of the position delta vector are calculated, the last thing we do is determine if there’s enough space left to apply this delta, and if not, we adjust it so that the character doesn’t go through walls and other obstacles. That’s it!</div><h2 class="normal-0-13" data-reactid="100">Conclusion</h2><div class="root-0-12" data-reactid="101">This post covers briefly the basic ideas behind character movement in Not So Flat. The material ended up being not very detailed, but hopefully still interesting to read. Time to work on a new game!</div><div class="root-0-17" data-reactid="102"><div data-reactid="103"><div id="disqus_thread" data-reactid="104"></div></div></div></div></div><div class="root-0-18" data-reactid="105"><div class="content-0-19" data-reactid="106">© 2014-2017 Aleksey Fedotov</div></div></div></div></body></html>